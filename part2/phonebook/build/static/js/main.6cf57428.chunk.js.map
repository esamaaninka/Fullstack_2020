{"version":3,"sources":["components/Persons.js","components/Filter.js","components/NameForm.js","services/Persons.js","services/Notification.js","App.js","index.js"],"names":["Persons","personlist","namefilter","deletePerson","filter","p","name","toLowerCase","includes","map","key","number","onClick","window","confirm","id","Filter","nameFilter","filterNames","value","onChange","NameForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","put","delete","messageStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","Notification","message","errorFlag","style","App","useState","persons","setPersons","setNewName","setNewNumber","setNameFilter","errorMessage","setErrorMessage","setErrorFlag","useEffect","personService","initialPersonList","event","target","preventDefault","person","changedPerson","nameObject","updatedPerson","setTimeout","catch","error","returnedPerson","concat","console","log","f","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAqBiBA,EAnBF,SAAC,GAA4C,IAA3CC,EAA0C,EAA1CA,WAAYC,EAA8B,EAA9BA,WAAYC,EAAkB,EAAlBA,aAErC,OACE,6BACGF,EAAWG,QAAO,SAAAC,GAAC,OAAIA,EAAEC,KAAKC,cACpBC,SAASN,EAAWK,kBACpBE,KAAI,SAAAJ,GAAC,OAAI,uBAAGK,IAAKL,EAAEC,MACnBD,EAAEC,KAAO,IAAMD,EAAEM,OAAS,IAC3B,4BAAQC,QAAS,WAEZC,OAAOC,QAAP,yBAAiCT,EAAEC,QACpCH,EAAaE,EAAEU,MAHnB,gBCIHC,EAZA,SAAC,GAA+B,IAA9BC,EAA6B,EAA7BA,WAAYC,EAAiB,EAAjBA,YAEzB,OACI,kDAEI,2BAAOC,MAAOF,EACVG,SAAUF,MCeXG,EArBE,SAAC,GAAwE,IAAvEC,EAAsE,EAAtEA,QAASC,EAA6D,EAA7DA,QAAQC,EAAqD,EAArDA,iBAAkBC,EAAmC,EAAnCA,UAAWC,EAAwB,EAAxBA,mBAC/D,OACE,0BAAMC,SAAUL,GACZ,qCAEM,2BAAOH,MAAOI,EACdH,SAAUI,KAGhB,uCAEM,2BAAOL,MAAOM,EACdL,SAAUM,KAGhB,6BACE,4BAAQE,KAAK,UAAb,U,gBCdJC,EAAU,qDAoBD,EAnBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAiB5B,EAdA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAY5B,EATA,SAACnB,EAAIoB,GAGlB,OAFgBL,IAAMO,IAAN,UAAaR,EAAb,YAAwBd,GAAMoB,GAE/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAM5B,EAJM,SAACnB,GAEpB,OADgBe,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2Bd,IAC5BiB,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SClBrCK,EAAe,CACjBC,MAAO,QACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAGVC,EAAa,CACjBP,MAAO,MACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAYDE,EATM,SAAC,GAA0B,IAAzBC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,UAC9B,OAAID,EAEF,yBAAKE,OAAqB,IAAdD,EAAsBX,EAAeQ,GAC9CE,GAHe,MC0FTG,EA3GH,WAAO,IAAD,EACeC,mBAAS,IADxB,mBACRC,EADQ,KACCC,EADD,OAEgBF,mBAAS,IAFzB,mBAER9B,EAFQ,KAECiC,EAFD,OAGoBH,mBAAS,IAH7B,mBAGR5B,EAHQ,KAGGgC,EAHH,OAIsBJ,mBAAS,IAJ/B,mBAIRpC,EAJQ,KAIIyC,EAJJ,OAKyBL,mBAAS,MALlC,mBAKRM,EALQ,KAKMC,EALN,OAMmBP,mBAAS,MAN5B,mBAMRH,EANQ,KAMGW,EANH,KAQhBC,qBAAU,WACRC,IAEG/B,MAAK,SAAAgC,GACJT,EAAWS,QAEd,IAgFH,OACE,6BACE,yCACE,kBAAC,EAAD,CAAcf,QAASU,EAAcT,UAAWA,IAChD,kBAAC,EAAD,CAAQjC,WAAYA,EAAYC,YAPlB,SAAC+C,GAAD,OAAWP,EAAcO,EAAMC,OAAO/C,UAQtD,yCACE,kBAAC,EAAD,CAAUG,QApFA,SAAC2C,GAIf,GAHAA,EAAME,iBAGHb,EAAQ7C,KAAI,SAAA2D,GAAM,OAAIA,EAAO9D,QAAME,SAASe,IAC7C,GAAIV,OAAOC,QAAP,UAAkBS,EAAlB,yEACH,CACC,IAAI8C,EAAgBf,EAAQlD,QAAO,SAAAC,GAAC,OAAIA,EAAEC,OAASiB,KAE7C+C,EAAa,CACjBhE,KAAM+D,EAAc,GAAG/D,KACvBK,OAAQc,GAGV4C,EAAc,GAAG1D,OAASc,EAE1BsC,EACUM,EAAc,GAAGtD,GAAIuD,GAC5BtC,MAAK,SAAAuC,GAEJhB,EAAWD,EAAQ7C,KAAI,SAAAJ,GAAC,OAAIA,EAAEU,KAAOsD,EAActD,GAAKV,EAAIkE,MAC5DX,EAAgB,WAAD,OAAYrC,EAAZ,yBAAoCE,IACnD+C,YAAW,WACTZ,EAAgB,QAChB,QAEHa,OAAM,SAAAC,GACLb,GAAa,GACbD,EAAgB,SAAD,OAAUrC,EAAV,2CACfgC,EAAWD,EAAQlD,QAAO,SAAAC,GAAC,OAAIA,EAAEC,OAASiB,MAE1CiD,YAAW,WACTZ,EAAgB,QACf,QAELJ,EAAW,IACXC,EAAa,IACbI,GAAa,SAWjBE,EALmB,CACfzD,KAAMiB,EACNZ,OAAQc,IAKTO,MAAK,SAAA2C,GACJpB,EAAWD,EAAQsB,OAAOD,IAC1Bf,EAAgB,SAAD,OAAUrC,EAAV,wBAAiCE,IAChDoD,QAAQC,IAAI,sCACZjB,GAAa,GACbW,YAAW,WACTZ,EAAgB,QAChB,KACFJ,EAAW,IACXC,EAAa,QAyBalC,QAASA,EAASC,iBAX3B,SAACyC,GAAD,OAAWT,EAAWS,EAAMC,OAAO/C,QAW4BM,UAAWA,EAAWC,mBAVnF,SAACuC,GAAD,OAAWR,EAAaQ,EAAMC,OAAO/C,UAW5D,uCACE,kBAAC,EAAD,CAASlB,WAAYqD,EAASpD,WAAYe,EAAYd,aAtBvC,SAACY,GAClBgD,EACgBhD,GACbiB,MAAK,SAAA2C,GAEJpB,EAAWD,EAAQlD,QAAO,SAAA2E,GAAC,OAAIA,EAAEhE,KAAOA,cCxFlDiE,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.6cf57428.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons =({personlist, namefilter, deletePerson}) => {\r\n    // check persons list against filter case insensitive, and display only matching ones\r\n    return (\r\n      <div>\r\n        {personlist.filter(p => p.name.toLowerCase()\r\n                  .includes(namefilter.toLowerCase()) )\r\n                  .map(p => <p key={p.name}> \r\n                  {p.name + ' ' + p.number + ' '}\r\n                  <button onClick={() => {\r\n                    //console.log('Button delete: ', p.id)\r\n                    if(window.confirm(`Want to delete ${p.name}`))\r\n                      deletePerson(p.id)\r\n                  }}>delete</button>                  \r\n                  </p>)\r\n      }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Persons\r\n","import React from 'react'\r\n\r\nconst Filter = ({nameFilter, filterNames}) => {\r\n\r\n    return(\r\n        <div>\r\n            filter shown with:\r\n            <input value={nameFilter}\r\n                onChange={filterNames}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst NameForm = ({addName, newName,handleNameChange, newNumber, handleNumberChange}) => {\r\n  return(\r\n    <form onSubmit={addName}>\r\n        <div>\r\n            name: \r\n              <input value={newName} \r\n              onChange={handleNameChange}\r\n              />\r\n        </div>\r\n        <div>\r\n            number:\r\n              <input value={newNumber}\r\n              onChange={handleNumberChange}\r\n              />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n  )\r\n}\r\nexport default NameForm","import axios from 'axios'\r\n// comment out for use with devenv json-server or phonebook-backed\r\n//const baseUrl = 'http://localhost:3001/persons' \r\n//const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = 'https://safe-lake-35420.herokuapp.com/api/persons/'\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  //console.log('Persons update:', id, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\nexport default { getAll, create, update, deletePerson }","import React from 'react'\r\n\r\n// messages and errors from 2e part2 example\r\n\r\nconst messageStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  \r\n  const errorStyle = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  \r\n  const Notification = ({message, errorFlag}) => {\r\n    if(!message) return null \r\n    else return(\r\n      <div style={errorFlag === false ? messageStyle : errorStyle}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport NameForm from './components/NameForm'\nimport personService from './services/Persons'\nimport Notification from './services/Notification'\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ nameFilter, setNameFilter ] = useState('')\n  const [ errorMessage, setErrorMessage] = useState(null)\n  const [ errorFlag, setErrorFlag] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersonList => {\n        setPersons(initialPersonList)\n      })\n  }, [])\n\n  const addName = (event) => { \n    event.preventDefault()\n    \n    // check person if already included, if yes either ok to update number or cancel\n    if(persons.map(person => person.name).includes(newName)){\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`))\n       {\n        var changedPerson = persons.filter(p => p.name === newName)\n        \n        const nameObject = {\n          name: changedPerson[0].name,\n          number: newNumber\n         }\n        \n        changedPerson[0].number = newNumber    \n        \n        personService\n          .update(changedPerson[0].id, nameObject)\n          .then(updatedPerson => {\n            //console.log('Update the person number in memory:', updatedPerson)\n            setPersons(persons.map(p => p.id !== changedPerson.id ? p : updatedPerson ))\n            setErrorMessage(`Updated ${newName} number with: ${newNumber}`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            },5000)\n          })\n          .catch(error => {\n            setErrorFlag(true)\n            setErrorMessage(`Note! ${newName} has been already removed from server.`)\n            setPersons(persons.filter(p => p.name !== newName))\n            //console.log('Persons after error: ', persons)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000) \n          })\n          setNewName('')\n          setNewNumber('')\n          setErrorFlag(false)\n      }\n    }\n    //\n    // person not included yet, create new record\n    else {\n      const nameObject = {\n          name: newName,\n          number: newNumber,\n          //id: will be set by PersonService\n      }\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setErrorMessage(`Added ${newName} with number ${newNumber}`)\n          console.log('add new name, set error flag false')\n          setErrorFlag(false) \n          setTimeout(() => {\n            setErrorMessage(null)\n          },5000)\n          setNewName('')\n          setNewNumber('')\n        })        \n      }\n  }\n\n  const deletePerson = (id) => {\n      personService\n        .deletePerson(id)\n        .then(returnedPerson => {\n          //remove the id person\n          setPersons(persons.filter(f => f.id !== id))\n        })\n  }\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const filterNames = (event) => setNameFilter(event.target.value)\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <Notification message={errorMessage} errorFlag={errorFlag} />\n        <Filter nameFilter={nameFilter} filterNames={filterNames}/>\n      <h3>Add a new</h3>\n        <NameForm addName={addName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n        <Persons personlist={persons} namefilter={nameFilter} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App\n\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n//import './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}